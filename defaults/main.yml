---
# Repository Configuration
# ----------------------
# Whether to configure package repositories
# Set to true if you need to add Lustre repositories
lustre_configure_repos: false

# Installation Configuration
# ------------------------
# Whether to upgrade existing Lustre installation
# Set to true to upgrade to latest version
lustre_upgrade: false

# DKMS Configuration
# ------------------
# Whether to use DKMS packages instead of pre-built modules
# Set to true if you need to build modules for custom kernels
lustre_dkms: false

# List of patches to apply to DKMS source
# Each patch should be a dictionary with:
#   - src: Path to the patch file (relative to playbook)
#   - version: Lustre version this patch applies to (e.g. "2.15.6")
#   - order: Order in which the patch should be applied (0-based index)
lustre_dkms_patches: []

# LNet Configuration
# -----------------
# LNet network configuration
# Format: network_type(interface)
lustre_lnet_networks: "o2ib0(ib0)"

# Whether to restart LNet service after configuration
lustre_lnet_restart: false

# Custom LNet configuration
lustre_lnet_conf: |
  net:
      - net type: o2ib1
        local NI(s):
          - interfaces:
                0: ib0
            tunables:
                peer_timeout: 180
                peer_credits: 128
                peer_buffer_credits: 0
                credits: 1024
            lnd tunables:
                peercredits_hiw: 64
                map_on_demand: 32
                concurrent_sends: 256
                fmr_pool_size: 2048
                fmr_flush_trigger: 512
                fmr_cache: 1
            CPT: "[0,1]"

# Lustre Configuration
# --------------------
# lustre_conf: |-
#   options lnet network="{{ lustre_lnet_networks }}"
#   options ko2iblnd credits=7424
#   [...]

# Filesystem Configuration
# ----------------------
# List of Lustre filesystems to mount
lustre_filesystems: []
